#!/usr/bin/env ruby

# frozen_string_literal: true

#
# Tic Tac Toe Game
#

def board
  system "clear"
  puts "+---------------------------+"
  puts "|   T I C   T A C   T O E   |"
  puts "+---------------------------+\n\n"
  puts "Player 1 (X)  -  Player 2 (O)\n\n"
  puts "Enter a number that corresponds to a point on the board\n\n"
  puts " #{$square[0]} | #{$square[1]} | #{$square[2]} "
  puts "-----------"
  puts " #{$square[3]} | #{$square[4]} | #{$square[5]} "
  puts "-----------"
  puts " #{$square[6]} | #{$square[7]} | #{$square[8]} "
end

def checkwin
  if $square[0] == $square[1] && $square[1] == $square[2]
    return 1
  elsif $square[3] == $square[4] && $square[4] == $square[5]
    return 1
  elsif $square[6] == $square[7] && $square[7] == $square[8]
    return 1
  elsif $square[0] == $square[3] && $square[3] == $square[6]
    return 1
  elsif $square[1] == $square[4] && $square[4] == $square[7]
    return 1
  elsif $square[2] == $square[5] && $square[5] == $square[8]
    return 1
  elsif $square[0] == $square[4] && $square[4] == $square[8]
    return 1
  elsif $square[2] == $square[4] && $square[4] == $square[6]
    return 1
  elsif $square[0] != '1' && $square[1] != '2' && $square[2] != '3' &&
        $square[3] != '4' && $square[4] != '5' && $square[5] != '6' &&
        $square[6] != '7' && $square[7] != '8' && $square[8] != '9'
   return 0
  else
   return  - 1
  end
end

$player = 1
$square = ['1', '2', '3', '4', '5', '6', '7', '8', '9']
$mark = 'X'
$i = -1

while $i == -1
  board

  puts "\n\nPlayer #{$player}, enter a number: "

  $choice = gets.chomp.to_i

  if $choice == 1 && $square[0] == '1'
    $square[0] = $mark
    $player += 1
  elsif $choice == 2 && $square[1] == '2'
    $square[1] = $mark
    $player += 1
  elsif $choice == 3 && $square[2] == '3'
    $square[2] = $mark
    $player += 1
  elsif $choice == 4 && $square[3] == '4'
    $square[3] = $mark
    $player += 1
  elsif $choice == 5 && $square[4] == '5'
    $square[4] = $mark
    $player += 1
  elsif $choice == 6 && $square[5] == '6'
    $square[5] = $mark
    $player += 1
  elsif $choice == 7 && $square[6] == '7'
    $square[6] = $mark
    $player += 1
  elsif $choice == 8 && $square[7] == '8'
    $square[7] = $mark
    $player += 1
  elsif $choice == 9 && $square[8] == '9'
    $square[8] = $mark
    $player += 1
  else
    puts "\n\nInvalid move. Press Enter to continue..."
    gets.chomp
  end

  if $player % 2 == 0
    $player = 2
    $mark = 'O'
  else
    $player = 1
    $mark = 'X'
  end

  $i = checkwin
end

board

if $i == 1
  puts "\n\n* * * * * * * * * * * * * *"
  puts "* * *  Player #{$player} win   * * *"
  puts "* * * * * * * * * * * * * *"
else
  puts "\n\n* * * * * * * * * * * * *"
  puts "* * *   Game draw   * * *"
  puts "* * * * * * * * * * * * *"
end
